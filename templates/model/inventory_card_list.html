{% comment %} {% extends "base.html" %} {% endcomment %}

{% block content %}
<h1>Фильтр инвентарных карточек</h1>

<form method="get" class="form-inline">
    <!-- Фильтр по комплектности -->
    <label for="completeness_sign">Признак комплектности:</label>
    <select name="completeness_sign" id="completeness_sign" class="form-control">
        <option value="">Все</option>
        {% for value, label in completeness_sign_choices %}
        <option value="{{ value }}" {% if request.GET.completeness_sign == value %}selected{% endif %}>{{ label }}</option>
        {% endfor %}
    </select>

    <!-- Фильтр по дате ввода в эксплуатацию -->
    <label for="start_date">Дата ввода (от):</label>
    <input type="date" name="start_date" id="start_date" class="form-control"
           value="{{ request.GET.start_date }}">

    <label for="end_date">Дата ввода (до):</label>
    <input type="date" name="end_date" id="end_date" class="form-control"
           value="{{ request.GET.end_date }}">
    <br>
    <button type="submit" class="btn btn-primary">Применить фильтр</button>
</form>

{% comment %} <h2>Инвентарные карточки</h2><a href="{% url 'inventory_card_add' %}" class="btn btn-success mb-3">Добавить карточку</a> {% endcomment %}
<div class="table-responsive">
    <table class="table table-bordered">
        <thead>
            <tr>
                <th>Номер карточки</th>
                <th>Код оборудования</th>
                <th>Признак комплектности</th>
                <th>Код категории оборудования</th>
                <th>Первоначальная стоимость</th>
                <th>Общая сумма амортизаций</th>
                <th>Дата выпуска оборудования</th>
                <th>Дата ввода в эксплуатацию</th>
                <th>Код подразделения</th>
                <th>Код работника</th>
                <th>Действия</th>
            </tr>
        </thead>
        <tbody>
            {% for card in inventory_cards %}
            <tr>
                <td>{{ card.card_number }}</td>
                <td>{{ card.equipment_code }}</td>
                <td>{{ card.completeness_sign }}</td>
                <td>{{ card.category_code }}</td>
                <td>{{ card.initial_cost }}</td>
                <td>{{ card.total_depreciation_amount }}</td>
                <td>{{ card.release_date }}</td>
                <td>{{ card.commissioning_date }}</td>
                <td>{{ card.department_code }}</td>
                <td>{{ card.employee_code }}</td>
                <td>
                    {% comment %} <a href="{% url 'inventory_card_delete' card.pk %}" class="btn btn-danger btn-sm">Удалить</a> {% endcomment %}
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
<style>
    table {
        width: 100%;
        table-layout: fixed;
    }
    
    th, td {
        word-wrap: break-word;
    }
    
    @media (max-width: 768px) {
        table {
            font-size: 12px;
        }
        th, td {
            padding: 5px;
        }
    }
    
</style>
{% endblock %}
