{% comment %} {% extends "base.html" %} {% endcomment %}

{% block content %}
<h1>Подразделения</h1>

<form method="get" class="form-inline">
    <label for="department_code">Код подразделения:</label>
    <select name="department_code" id="department_code" class="form-control">
        <option value="">Все</option>
        {% for code in department_choices %}
        <option value="{{ code }}" {% if request.GET.department_code == code %}selected{% endif %}>{{ code }}</option>
        {% endfor %}
    </select>
    <button type="submit" class="btn btn-primary">Применить фильтр</button>
</form>

<a href="{% url 'department_add' %}" class="btn btn-success mb-3">Добавить подразделение</a>
<table class="table table-bordered">
    <thead>
        <tr>
            <th>Код подразделения</th>
            <th>Наименование</th>
            <th>Код руководителя</th>
            <th>Действия</th>
        </tr>
    </thead>
    <tbody>
        {% for department in departments %}
        <tr>
            <td>{{ department.department_code }}</td>
            <td>{{ department.name }}</td>
            <td>{{ department.manager_code }}</td>
            <td>
                <a href="{% url 'department_delete' department.pk %}" class="btn btn-danger btn-sm">Удалить</a>
            </td>
        </tr>
        {% empty %}
        <tr>
            <td colspan="4">Нет данных для отображения</td>
        </tr>
        {% endfor %}
    </tbody>
</table>

{% endblock %}
